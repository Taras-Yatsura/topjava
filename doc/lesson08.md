<article class="markdown-body entry-content container-lg" itemprop="text">
    <h1>
        <a id="user-content-онлайн-проект-topjava" class="anchor" aria-hidden="true" href="#онлайн-проект-topjava">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Онлайн-проект <a href="https://github.com/JavaWebinar/topjava">Topjava</a>
    </h1>
    <h2>
        <a id="user-content-материалы-занятия" class="anchor" aria-hidden="true" href="#материалы-занятия">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFfkpMd2UyWjBsc2JsSE4tRDFkU3BvMktFQkhUN1J6VExxSUUzOHlSR0RhNm8" rel="nofollow">Материалы занятия</a>
    </h2>
    <ul>
        <li><strong>Браузер кэширует javascript и css. Если изменения не работают, обновите приложение в браузере (в хроме <code>Ctrl+F5</code>)</strong></li>
        <li><strong>При удалении файлов не забывайте делать clean: <code>mvn clean</code></strong></li>
    </ul>
    <h2>
        <a id="user-content--разбор-домашнего-задания-hw7" class="anchor" aria-hidden="true" href="#-разбор-домашнего-задания-hw7">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png" alt="hw" style="max-width:100%;"></a> Разбор домашнего задания HW7
    </h2>
    <h3>
        <a id="user-content--1-hw7" class="anchor" aria-hidden="true" href="#-1-hw7">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 1. <a href="https://drive.google.com/file/d/1h6wg2V9yZoNX7fA7mNA7w7Kxp8IACsIJ" rel="nofollow">HW7</a>
    </h3>
    <h4>
        <a id="user-content-apply-8_01_hw07_controller_testpatch" class="anchor" aria-hidden="true" href="#apply-8_01_hw07_controller_testpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_01_HW07_controller_test.patch
    </h4>
    <ul>
        <li>
            <a href="https://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#persistent-classes-equalshashcode" rel="nofollow">Persistent classes implementing equals and hashcode</a>: переопределять <code>equals()/hashCode()</code>
            необходимо, если
            <ul>
                <li>использовать Entity в <code>Set</code> (рекомендовано для many ассоциаций), либо как ключи в <code>HashMap</code></li>
                <li>использовать <em>reattachment of detached instances</em> (те манипулировать одним Entity в нескольких транзакциях/сессиях).</li>
            </ul>
        </li>
        <li>Оптимально использовать уникальные неизменяемые бизнес поля, но обычно таких нет, и, чаще всего, используются PK с ограничением, что он может быть <code>null</code> у новых объектов и нельзя объекты сравнивать
            через <code>equals</code> в бизнес-логике (например тестах).
        </li>
        <li><a href="https://stackoverflow.com/questions/1638723" rel="nofollow">Equals() and hashcode() when using JPA and Hibernate</a></li>
    </ul>
    <hr>
    <h4>
        <a id="user-content-apply-8_02_hw07_rest_controllerpatch" class="anchor" aria-hidden="true" href="#apply-8_02_hw07_rest_controllerpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_02_HW07_rest_controller.patch
    </h4>
    <ul>
        <li>В <code>MealTo</code> вместо изменяемых полей и конструктора без параметров сделал <a href="https://www.logicbig.com/tutorials/misc/jackson/constructor-properties.html" rel="nofollow"><code>@ConstructorProperties</code></a>. <code>Immutable</code> классы
            всегда предпочтительнее для данных.
        </li>
        <li><a href="https://refactoring.guru/ru/design-patterns/strategy" rel="nofollow">Паттерн стратегия</a>.</li>
    </ul>
    <h3>
        <a id="user-content--2-hw7-optional" class="anchor" aria-hidden="true" href="#-2-hw7-optional">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 2. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFLXZ3OHdac18yZlk" rel="nofollow">HW7 Optional</a>
    </h3>
    <h4>
        <a id="user-content-apply-8_03_hw07_formatterspatch" class="anchor" aria-hidden="true" href="#apply-8_03_hw07_formatterspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_03_HW07_formatters.patch
    </h4>
    <blockquote>
        <ul>
            <li>Перенес форматтеры в подпакет <code>web</code>, т.к. они используются Spring MVC</li>
            <li>Заменил <code>@RequestParam(required = false)</code> на <code>@RequestParam @Nullable</code></li>
        </ul>
    </blockquote>
    <h4>
        <a id="user-content-apply-8_04_hw07_soapui_curlpatch" class="anchor" aria-hidden="true" href="#apply-8_04_hw07_soapui_curlpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_04_HW07_soapui_curl.patch
    </h4>
    <blockquote>
        <p>Добавил примеры запросов curl в <code>config/curl.md</code></p>
    </blockquote>
    <ul>
        <li><a href="http://rus-linux.net/lib.php?name=/MyLDP/internet/curlrus.html" rel="nofollow">Написание HTTP-запросов с помощью Curl</a> (для Windows можно использовать Git Bash)</li>
        <li>В IDEA появился отличный инструмент тестирования запросов. Для конвертации
            в <a href="https://www.jetbrains.com/help/idea/http-client-in-product-code-editor.html" rel="nofollow"><code>Tools-&gt;HTTP Client-&gt;Test RESTful Web Service</code></a> скопируйте curl без флага <code>-s</code>
        </li>
    </ul>
    <h3>
        <a id="user-content--3-hw7-optional-getwithmeals--тесты" class="anchor" aria-hidden="true" href="#-3-hw7-optional-getwithmeals--тесты">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 3. <a href="https://drive.google.com/file/d/13cjenXzWDr52HTTzleomOd-yjPAEAbOA" rel="nofollow">HW7 Optional: getWithMeals + тесты</a>
    </h3>
    <h4>
        <a id="user-content-apply-8_05_hw07_with_mealspatch" class="anchor" aria-hidden="true" href="#apply-8_05_hw07_with_mealspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_05_HW07_with_meals.patch
    </h4>
    <h4>
        <a id="user-content-apply-8_06_hw07_test_with_mealspatch" class="anchor" aria-hidden="true" href="#apply-8_06_hw07_test_with_mealspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_06_HW07_test_with_meals.patch
    </h4>
    <blockquote>
        <p>Изменения в AssertJ: <code>ignoringAllOverriddenEquals</code> для рекурсивных сравнений не нужен. См. <a href="https://assertj.github.io/doc/#assertj-core-recursive-comparison-ignoring-equals" rel="nofollow">overridden equals used before 3.17.0</a></p>
    </blockquote>
    <h2>
        <a id="user-content-занятие-8" class="anchor" aria-hidden="true" href="#занятие-8">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Занятие 8:
    </h2>
    <h3>
        <a id="user-content--4--webjars-jquery-and-javascript-frameworks" class="anchor" aria-hidden="true" href="#-4--webjars-jquery-and-javascript-frameworks">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 4.  <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFUmVsM3V6djMzYmc" rel="nofollow">WebJars. jQuery and JavaScript frameworks</a>
    </h3>
    <h4>
        <a id="user-content-apply-8_07_webjarspatch" class="anchor" aria-hidden="true" href="#apply-8_07_webjarspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_07_webjars.patch
    </h4>
    <blockquote>
        <ul>
            <li>
                Обновил jQuery до 3.x, Bootstrap до 4.x
                <ul>
                    <li><a href="https://tproger.ru/translations/new-features-of-jquery-3/" rel="nofollow">Новое в jQuery 3</a></li>
                </ul>
            </li>
            <li>
                УБРАЛ из проекта <a href="http://dandelion.github.io" rel="nofollow">Dandelion обертку к datatables</a>:
                <ul>
                    <li>не встречал нигде, кроме Spring Pet Clinic;</li>
                    <li>поддержка работы с datatables через Dandelion оказалось гораздо более трудоемкое, чем работа с плагином напрямую.</li>
                </ul>
            </li>
            <li>Исключил ненужные зависимости</li>
        </ul>
    </blockquote>
    <ul>
        <li>Подключение веб ресурсов. <a href="http://www.webjars.org/" rel="nofollow">WebJars</a>.</li>
        <li><a href="http://www.jamesward.com/2012/04/25/introducing-webjars-web-libraries-as-managed-dependencies" rel="nofollow">Introducing WebJars</a></li>
        <li><a href="https://ru.wikipedia.org/wiki/Document_Object_Model" rel="nofollow">Document Object Model (DOM)</a></li>
        <li><a href="https://css-tricks.com/dom/" rel="nofollow">What is the DOM?</a></li>
        <li><a href="https://ru.wikipedia.org/wiki/JQuery" rel="nofollow">jQuery</a></li>
        <li><a href="http://stackoverflow.com/questions/7062775/is-jquery-a-javascript-library-or-framework" rel="nofollow">Is jquery a javascript library or framework</a></li>
        <li><a href="https://www.datatables.net/" rel="nofollow">DataTables</a></li>
        <li><a href="http://www.sitepoint.com/working-jquery-datatables/" rel="nofollow">Working with jQuery DataTables</a></li>
    </ul>
    <h2>
        <a id="user-content--5-bootstrap" class="anchor" aria-hidden="true" href="#-5-bootstrap">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 5. <a href="https://drive.google.com/file/d/1RHtzw8OQt6guCu6xe3apT7F9EfiX96tr" rel="nofollow">Bootstrap</a>
    </h2>
    <h4>
        <a id="user-content-apply-8_08_bootstrap4patch" class="anchor" aria-hidden="true" href="#apply-8_08_bootstrap4patch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_08_bootstrap4.patch
    </h4>
    <blockquote>
        <ul>
            <li><a href="https://ru.wikipedia.org/wiki/Bootstrap_(%D1%84%D1%80%D0%B5%D0%B9%D0%BC%D0%B2%D0%BE%D1%80%D0%BA)" rel="nofollow">WIKI Bootstrap</a></li>
            <li>
                Добавил <a href="https://www.w3schools.com/icons/fontawesome_icons_intro.asp" rel="nofollow">Font Awesome</a>
                <ul>
                    <li><a href="https://gist.github.com/blowsie/15f8fe303383e361958bd53ecb7294f9">Map glyphicon icons to font-awesome</a></li>
                </ul>
            </li>
            <li>В <code>headTag.jsp</code> в ссылку на <code>style.css</code> добавил <code>?v=2</code>. Стили изменились, изменяя версию в параметре мы заставляем браузер не брать их из кэша, а загружать заново.</li>
        </ul>
    </blockquote>
    <ul>
        <li>
            <a href="https://getbootstrap.com/" rel="nofollow">Bootstrap</a>
            <ul>
                <li><a href="https://getbootstrap.com/docs/4.1/examples/" rel="nofollow">Bootstrap Examples</a></li>
                <li><a href="https://getbootstrap.com/docs/4.1/components/navbar/" rel="nofollow">Navbar</a></li>
                <li><a href="https://getbootstrap.com/docs/4.1/utilities/spacing/" rel="nofollow">Spacing</a></li>
                <li><a href="https://getbootstrap.com/docs/4.1/components/forms/" rel="nofollow">Forms</a></li>
                <li><a href="https://getbootstrap.com/docs/4.1/examples/sticky-footer/" rel="nofollow">Sticky footer</a></li>
            </ul>
        </li>
        <li><a href="https://bootstrap-4.ru/" rel="nofollow">Документация Bootstrap на русском</a></li>
        <li>
            Дополнительно
            <ul>
                <li><a href="http://www.tutorialrepublic.com/twitter-bootstrap-tutorial/" rel="nofollow">Twitter Bootstrap Tutorial</a></li>
                <li><a href="https://www.youtube.com/playlist?list=PLVfMKQXDAhGUxJ4prQSC2K13-YlYj8LgB" rel="nofollow">Видео уроки Bootstrap 4</a></li>
                <li><a href="https://www.youtube.com/watch?v=46q2eB7xvXA" rel="nofollow">Bootstrap верстка современного сайта за 45 минут</a></li>
            </ul>
        </li>
    </ul>
    <h2>
        <a id="user-content--ваши-вопросы" class="anchor" aria-hidden="true" href="#-ваши-вопросы">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png" alt="question" style="max-width:100%;"></a> Ваши вопросы
    </h2>
    <blockquote>
        <p>А где реально этот путь "classpath:/META-INF/resources/webjars"?</p>
    </blockquote>
    <p>Внутри подключаемых webjars ресурсы лежат по пути <code>/META-INF/resources/webjars/...</code> Не поленитесь посмотреть на них через <code>Ctrl+Shift+N</code>. Все подключаемые jar попадают в classpath и ресурсы доступны
        по этому пути.
    </p>
    <blockquote>
        <p>У меня webjars зависимость лежит внутри ".m2\repository\org\webjars". С чем это может быть связано?</p>
    </blockquote>
    <p>Maven скачивает все депенденси в local repository, который по умолчанию находится в <code>~/.m2</code>. Каталог по умолчанию можно переопределить в <code>APACHE-MAVEN-HOME\conf\settings.xml</code>,
        элемент <code>localRepository</code>.
    </p>
    <blockquote>
        <p>WEBJARS лежат вообще в другом месте WEB-INF\lib*. Биндим mapping="/webjars/*" на реальное положение jar в ware, откуда spring знает где искать наш jquery ?</p>
    </blockquote>
    <p>В war в <code>WEB-INF/lib/*</code> лежат все jar, которые попадают к classpath. Spring при обращении по url <code>/webjars/</code> ищет по пути
        биндинга <code>&lt;mvc:resources mapping="/webjars/ " location="classpath:/META-INF/resources/webjars/"/&gt;</code>
        по всему classpath (то же самое как распаковать все jar в один каталог) в <code>META-INF/resources/webjars/</code>. В этом месте во всех jar, которые мы подключили из webjars лежат наши ресурсы.
    </p>
    <blockquote>
        <p>Оптимально ли делать доступ к статическим ресурсам (css, js, html) через webjars ?</p>
    </blockquote>
    <p>На продакшене под нагрузкой статические ресурсы лучше всего держать не в war, а снаружи. Доступ к ним делается либо
        через <a href="http://www.moreofless.co.uk/static-content-web-pages-images-tomcat-outside-war/" rel="nofollow">конфигурирование Tomcat</a>.<br>
        Но чаще всего для доступа к статике ставят прокси, например <a href="https://nginx.org/ru/" rel="nofollow">Nginx</a>
    </p>
    <h2>
        <a id="user-content--6-ajax-datatables-jquery" class="anchor" aria-hidden="true" href="#-6-ajax-datatables-jquery">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 6. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFcGs4b1IyWWF2S2c" rel="nofollow">AJAX. Datatables. jQuery</a>
    </h2>
    <p>JSP полезны, если надо с сервера отдать статический html с серверной логикой (условия, циклы), сформированный на основе модели. Для динамической отрисовки таблицы мы будем использовать REST и JSON на
        9м уроке (работа с datatables через Ajax).
    </p>
    <p>По дебагу JavaScript из IDEA проверьте:</p>
    <ul>
        <li>в IDEA плагин <code>JavaScript Debugger</code></li>
        <li>в Chrome расширение <a href="https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji" rel="nofollow">JetBrains IDE Support</a></li>
        <li>при проблемах с
            портами <a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360009567459-Webstorm-2020-2-1-Remote-Debugging-do-not-work" rel="nofollow">удалите в настройках IDEA файлы <code>~\AppData\Roaming\JetBrains\IntelliJIdea2020.x\options\web-browsers.xml</code> и <code>other.xml</code></a>
        </li>
    </ul>
    <h4>
        <a id="user-content-apply-8_09_ajax_datatablespatch" class="anchor" aria-hidden="true" href="#apply-8_09_ajax_datatablespatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_09_ajax_datatables.patch
    </h4>
    <blockquote>
        <ul>
            <li>Переименовал js скрипты по <a href="https://stackoverflow.com/questions/7273316/what-is-the-javascript-filename-naming-convention" rel="nofollow">javascript filename naming convention</a></li>
            <li><code>reset()</code> не чистит скрытые (hidden) поля формы. Сделал очистку полей через <code>form.find(":input").val("")</code></li>
            <li>Поменял форматирование модального окна: <a href="https://getbootstrap.com/docs/4.1/components/modal/" rel="nofollow">Botstrap4 Modal</a></li>
            <li>URL с  <code>/ajax/admin/users</code> поменял на <code>/admin/users</code></li>
        </ul>
    </blockquote>
    <p>JavaScript</p>
    <ul>
        <li><a href="https://ru.wikipedia.org/wiki/AJAX" rel="nofollow">AJAX</a></li>
        <li><a href="https://learn.javascript.ru/introduction-browser-events" rel="nofollow">Введение в браузерные события</a></li>
        <li><a href="https://learn.javascript.ru/script-async-defer" rel="nofollow">Скрипты: async, defer</a></li>
        <li><a href="https://flaviocopes.com/javascript-async-defer/#with-defer-in-the-head" rel="nofollow">With defer, in the head</a></li>
        <li><a href="http://stackoverflow.com/questions/436411/where-should-i-put-script-tags-in-html-markup/24070373#24070373" rel="nofollow">JavaScript loading modern approach</a></li>
    </ul>
    <p>jQuery</p>
    <ul>
        <li><a href="http://ruseller.com/jquery.php?id=124" rel="nofollow">Событие $(document).ready</a>.</li>
        <li><a href="http://anton.shevchuk.name/jquery/" rel="nofollow">jQuery для всех</a>.</li>
        <li><a href="http://anton.shevchuk.name/javascript/jquery-for-beginners-ajax/" rel="nofollow">jQuery для начинающих. AJAX</a>.</li>
        <li><a href="http://anton.shevchuk.name/javascript/jquery-for-beginners-selectors/" rel="nofollow">jQuery для начинающих. Селекторы</a>.</li>
        <li><a href="https://www.freecodecamp.org/map-aside#nested-collapsejQuery" rel="nofollow">jQuery task from freecodecamp</a></li>
        <li><a href="http://api.jquery.com/" rel="nofollow">jQuery API</a></li>
    </ul>
    <p>DataTables/Bootstrap</p>
    <ul>
        <li><a href="http://datatables.net/reference/api/" rel="nofollow">DataTables API</a></li>
        <li><a href="http://bootstrap-ru.com/203/javascript.php" rel="nofollow">Javascript плагины для Bootstrap</a></li>
        <li><a href="https://datatables.net/examples/styling/bootstrap4" rel="nofollow">DataTables/Bootstrap 4 integration</a></li>
        <li><a href="https://datatables.net/upgrade/1.10-convert" rel="nofollow">Converting parameter names for 1.10</a></li>
        <li><a href="http://stackoverflow.com/questions/25207147/datatable-vs-datatable-why-is-there-a-difference-and-how-do-i-make-them-w" rel="nofollow">dataTable() vs. DataTable()</a></li>
    </ul>
    <h2>
        <a id="user-content--ваши-вопросы-1" class="anchor" aria-hidden="true" href="#-ваши-вопросы-1">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png" alt="question" style="max-width:100%;"></a> Ваши вопросы
    </h2>
    <blockquote>
        <p>Что делает код?</p>
    </blockquote>
    <pre><code>$('.delete').click(function () {
        deleteRow($(this).attr("id"));
    });
</code></pre>
    <p>На все элементы DOM с классом <code>delete</code> вешается обработчик события <code>click</code> который вызывает функцию <code>deleteRow</code>. Классы в html разделяются через пробел.
        См. <a href="http://anton.shevchuk.name/javascript/jquery-for-beginners-selectors/" rel="nofollow">селекторы в jQuery</a>
    </p>
    <blockquote>
        <p>Как в таблицу <code>&lt;table id="datatable"&gt;</code> из JSP вставляются дополнительные <code>div</code>, поле для поиска, стрелочки для сортировки и т.д. (видны в браузере через <code>Inspect (Ctrl+Shift+I)</code> в хроме) ?</p>
    </blockquote>
    <p>JSP отдает html на клиента, в браузере исполняется скрипт <code>$("#datatable").DataTable(..)</code>, который модифицирует элемент таблицы и вставляет туда (в элементы DOM html документа) все табличные плюшки.</p>
    <blockquote>
        <p>Как выполняется сценарий по запросу <code>http://localhost:8080/topjava/users</code> ?</p>
    </blockquote>
    <p><strong>Обязательно смотрите в браузере вкладку Networks</strong></p>
    <ol>
        <li><code>RootController</code> принимает GET запрос, достает из репозитория юзеров и отдает их <code>users.jsp</code> для формирования таблицы. На следующем занятии мы поменяем сценарий - данные для таблицы для
            первоначальной отрисовки будут доставаться по ajax.
        </li>
        <li>Сформированный <code>users.jsp</code> отдается в браузер клиента.</li>
        <li>Страница и js скрипты, подключенные в <code>users.jsp</code>, загружаются в браузер.</li>
        <li>После загрузки страницы по событию <code>onload</code> вызывается <code>$(function ()</code> из <code>topjava.users.js</code>. В ней компонент <code>#datatable</code> делается табличкой <code>DataTable</code> и вызывается <code>makeEditable()</code>
            из <code>topjava.common.js</code>.
        </li>
        <li>В <code>makeEditable()</code> вешается <code>click</code> на элементы с классом <code>.delete</code> и глобально настраиваются вызовы <code>ajax</code></li>
    </ol>
    <p>Все. Приложение ждет дальнейших запросов от клиента.</p>
    <blockquote>
        <p>тянет ли Bootstrap за собой jQuery?</p>
    </blockquote>
    <p>Bootstrap css это стили (форматирование), Bootstrap js зависит от jQuery: <a href="http://stackoverflow.com/questions/14608681/can-i-use-twitter-bootstrap-without-jquery#answer-14608772" rel="nofollow">http://stackoverflow.com/questions/14608681/can-i-use-twitter-bootstrap-without-jquery#answer-14608772</a></p>
    <h4>
        <a id="user-content-apply-8_10_refactor_jspatch" class="anchor" aria-hidden="true" href="#apply-8_10_refactor_jspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_10_refactor_js.patch
    </h4>
    <blockquote>
        <ul>
            <li>Сделал <a href="https://stackoverflow.com/a/5064235/548473" rel="nofollow">объект <code>ctx</code> (контекст) для глобальных переменных</a></li>
            <li><code>datatableApi</code> присваиваю в функции <code>makeEditable</code>, куда ее передаю параметром</li>
            <li>Вынес переменную <code>form = $('#detailsForm')</code> (инициализирую только 1-н раз)</li>
            <li>При удалении строки добавил <a href="https://stackoverflow.com/questions/10462839/how-to-display-a-confirmation-dialog-when-clicking-an-a-link" rel="nofollow">подтверждение confirm</a></li>
            <li><a href="http://api.jquery.com/jquery.ajax/#jqXHR" rel="nofollow">В <code>jquery.ajax</code> заменил depricated <code>success</code> на <code>done()</code></a></li>
            <li>В HTML атрибут id у каждого элемента документа должен быть уникален, а у нас в <code>users.jsp</code> дублировались <code>id</code>. Переместил атрибут <code>id</code> в тэг <code>&lt;tr&gt;</code> и в <code>makeEditable</code> достаю его через селектор jQuery <code>closest('tr')</code>.</li>
        </ul>
    </blockquote>
    <h2>
        <a id="user-content--7--notifications" class="anchor" aria-hidden="true" href="#-7--notifications">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 7. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFMTVWaXdWRUZsUEE" rel="nofollow"> Notifications</a>
    </h2>
    <h4>
        <a id="user-content-apply-8_11_notificationpatch" class="anchor" aria-hidden="true" href="#apply-8_11_notificationpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_11_notification.patch
    </h4>
    <blockquote>
        <ul>
            <li>Сделал <a href="https://stackoverflow.com/a/4303862/548473" rel="nofollow">защиту от кэширование ajax запросов в IE</a></li>
            <li>Обновил API Noty (3.x), добавил в сообщения font-awesome</li>
            <li>
                <a href="http://tomcat.apache.org/tomcat-8.5-doc/changelog.html" rel="nofollow">Tomcat 8.5.x перестал отдавать в заголовке <code>statusText</code></a>. Отображаем просто <code>status</code>
                <ul>
                    <li>RFC 7230 states that clients should ignore reason phrases in HTTP/1.1 response messages. Since the reason phrase is optional, Tomcat no longer sends it (statusText).</li>
                </ul>
            </li>
        </ul>
    </blockquote>
    <ul>
        <li><a href="http://ruseller.com/jquery.php?id=2" rel="nofollow">Обработка ajaxError</a>.</li>
        <li><a href="http://ned.im/noty/" rel="nofollow">jQuery notification</a></li>
    </ul>
    <h2>
        <a id="user-content--8-добавление-spring-security" class="anchor" aria-hidden="true" href="#-8-добавление-spring-security">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 8. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFRVkzcFMwc0hrYmM" rel="nofollow">Добавление Spring Security</a>
    </h2>
    <blockquote>
        <ul>
            <li>Правка к видео: путь в intercept-url должен быть полный: <code>pattern="/rest/admin/**"</code></li>
            <li>В Spring Security 4.x по умолчанию включен csrf (защита от <a href="https://ru.wikipedia.org/wiki/Межсайтовая_подделка_запроса" rel="nofollow">межсайтовой подделки запроса</a>). Выключил, включим на 10-м занятии.</li>
            <li>В Spring Security 5.x по умолчанию пароль кодируется. Выключил, включим на 10-м занятии.</li>
        </ul>
    </blockquote>
    <ul>
        <li><a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#ns-password-encoder" rel="nofollow">Adding a Password Encoder</a></li>
    </ul>
    <h4>
        <a id="user-content-apply-8_12_add_securitypatch" class="anchor" aria-hidden="true" href="#apply-8_12_add_securitypatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 8_12_add_security.patch
    </h4>
    <ul>
        <li><a href="http://projects.spring.io/spring-security/" rel="nofollow">Spring Security</a></li>
        <li><a href="https://ru.wikipedia.org/wiki/Протокол_AAA" rel="nofollow">Протокол AAA</a></li>
        <li><a href="https://ru.wikipedia.org/wiki/Аутентификация_в_Интернете" rel="nofollow">Методы аутентификации</a>.</li>
        <li><a href="https://en.wikipedia.org/wiki/Basic_access_authentication" rel="nofollow">Basic access authentication</a></li>
        <li><a href="http://articles.javatalks.ru/articles/17" rel="nofollow">Использование ThreadLocal</a></li>
        <li><a href="http://www.baeldung.com/security-spring" rel="nofollow">Security with Spring</a></li>
        <li><a href="http://decodebase64.com/" rel="nofollow">Decode/Encode Base64 online</a></li>
    </ul>
    <p>Вместо</p>
    <p><code>curl -v -H 'Authorization: Basic dXNlckB5YW5kZXgucnU6cGFzc3dvcmQ=' http://localhost:8080/topjava/rest/profile/meals</code></p>
    <p>лучше использовать эквивалентный</p>
    <p><code>curl -v --user user@yandex.ru:password http://localhost:8080/topjava/rest/profile/meals</code></p>
    <h2>
        <a id="user-content--ваши-вопросы-2" class="anchor" aria-hidden="true" href="#-ваши-вопросы-2">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png" alt="question" style="max-width:100%;"></a> Ваши вопросы
    </h2>
    <blockquote>
        <p>Как можно в браузере сбросить введенный пароль базовой авторизации?</p>
    </blockquote>
    <p>Проще всего делать новый запрос в новой анонимной вкладке (<code>Ctrl+Shift+N</code> в Chrome)</p>
    <blockquote>
        <p>Как по REST определяется залогиненный юзер? Аутентификация происходит при каждом запросе?</p>
    </blockquote>
    <p><a href="http://stackoverflow.com/questions/319530/restful-authentication" rel="nofollow">Способы RESTful Authentication</a>. Мы будем использовать 2:</p>
    <ul>
        <li>Basic Authentication для REST контроллеров с аутентификацией при каждом запросе</li>
        <li>coockie + http session для UI контроллеров на следующем уроке</li>
    </ul>
    <blockquote>
        <p>Почему <code>@RequestParam</code> не работает в PUT и DELETE запросах?</p>
    </blockquote>
    <p>По спецификации Servlet API параметры в теле для PUT, DELETE, TRACE методах не обрабатываются (только в url). Те. можно:</p>
    <ul>
        <li>использовать POST</li>
        <li>передавать параметры в url</li>
        <li>использовать <code>HttpPutFormContentFilter</code> фильтр</li>
        <li>настроить Tomcat в обход спецификации.
            См. <a href="http://stackoverflow.com/a/14568899/548473" rel="nofollow">Handle request parameters for an HTTP PUT method</a>
        </li>
    </ul>
    <blockquote>
        <p>Данные между браузером и ajax гоняются в виде json? Почему в <code>AdminAjaxController</code>  у методов delete и createOrUpdate нет в аннотациях параметра <code>consumes = MediaType.APPLICATION_JSON_VALUE</code> ?</p>
    </blockquote>
    <p>Посмотреть на данные между приложением и браузером можно (и нужно!) в браузере (вкладка Network в Инструментах разработчика, F12 в Хроме). Зависит от того, как их отправляем из браузера и из
        приложения. Данные формы обычно передаются просто параметрами. <code>APPLICATION_JSON_VALUE</code> в контроллере нужно, только если параметры отдаются/принимаются в формате JSON.
    </p>
    <h2>
        <a id="user-content--домашнее-задание-hw08" class="anchor" aria-hidden="true" href="#-домашнее-задание-hw08">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png" alt="hw" style="max-width:100%;"></a> Домашнее задание HW08
    </h2>
    <ul>
        <li>
            1: Перевести <code>meals</code> на <code>datatables</code> (изменить <code>meals.jsp</code>, вместо <code>JspMealController</code> будет <code>MealUIController</code>).
            <ul>
                <li>1.1 Реализовать добавление записи еды через модальное окно Bootstrap и удаление еды по ajax (БЕЗ редактирования).</li>
                <li>1.2 При вставке данных по AJAX пропадает все JSP форматирование, чинить перерисовку НЕ надо. Следующий урок- будем делать datatable по AJAX и форматирование на стороне клиента.</li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content-optional" class="anchor" aria-hidden="true" href="#optional">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Optional.
    </h3>
    <ul>
        <li>
            2: Перевести работу фильтра на AJAX. Попробуйте после модификации таблицы (например добавлении записи) обновлять ее также с учетом фильтра.
            <ul>
                <li><a href="https://handynotes.ru/2009/08/get-versus-pos.html" rel="nofollow">Руководство по выбору между GET и POST</a></li>
            </ul>
        </li>
        <li>3: Сделать кнопку сброса фильтра.</li>
        <li>
            4: Реализовать enable/disable юзера
            <ul>
                <li>4.1 Через checkbox в <code>users.jsp</code> с сохранением в DB. Неактивных пользователей выделить css стилем. Проверьте, как у вас первоначально (или по F5) отображаются неактивные пользователи (если
                    меняете css при enable/disable)
                </li>
                <li>4.2 Добавить метод <code>enable</code> в <code>AdminRestController</code> и протестировать его в <code>AdminRestControllerTest</code> и в сервисах</li>
            </ul>
        </li>
    </ul>
    <hr>
    <h2>
        <a id="user-content--подсказки-по-hw08" class="anchor" aria-hidden="true" href="#-подсказки-по-hw08">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png" alt="error" style="max-width:100%;"></a> Подсказки по HW08
    </h2>
    <ul>
        <li>1: enable/disable можно реализовать как на уровне репозитория, так и на уровне сервиса через несколько sql, которые должны быть в одной транзакции (<code>@Transactional</code>)</li>
        <li>2: в <code>topjava.common.js</code> следует вынести только общие скрипты (cкрипты еды размещайте в  <code>topjava.meals.js</code>, пользователей в <code>topjava.users.js</code>)</li>
        <li>3: если в контроллер приходит <code>null</code>, проверте в <code>Network</code> вкладке браузера в каком формате приходят данные и в каком формате в контроллере вы их принимаете (<code>consumes</code>)</li>
        <li>4: при реализации <code>enable/disable</code> лучше явно указывать нужное состояние, чем переключать на противоположное. Если параллельно вам кто-то изменит состояние, то будет несоответствие UI и DB</li>
    </ul>
</article>