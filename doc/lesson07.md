<article class="markdown-body entry-content container-lg" itemprop="text">
    <h1>
        <a id="user-content-онлайн-проект-topjava" class="anchor" aria-hidden="true" href="#онлайн-проект-topjava">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Онлайн-проект <a href="https://github.com/JavaOps/topjava">Topjava</a>
    </h1>
    <h2>
        <a id="user-content-материалы-занятия" class="anchor" aria-hidden="true" href="#материалы-занятия">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFfjVnUVhINEg0d09Nb3JsY2ZZZmpsSWp3bzdHMkpKMmtPTlpjckxyVzg0SWc" rel="nofollow">Материалы занятия</a>
    </h2>
    <h3>
        <a id="user-content--правки-в-проекте" class="anchor" aria-hidden="true" href="#-правки-в-проекте">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png" alt="correction" style="max-width:100%;"></a> Правки в проекте
    </h3>
    <h4>
        <a id="user-content-apply-7_0_fixpatch" class="anchor" aria-hidden="true" href="#apply-7_0_fixpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_0_fix.patch
    </h4>
    <ul>
        <li>ключи мапы в xml конфигурации можно писать без кавычек (<code>systemEnvironment[TOPJAVA_ROOT]</code>)</li>
        <li>мелкие правки</li>
    </ul>
    <h2>
        <a id="user-content--разбор-домашнего-задания-hw6" class="anchor" aria-hidden="true" href="#-разбор-домашнего-задания-hw6">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png" alt="hw" style="max-width:100%;"></a> Разбор домашнего задания HW6
    </h2>
    <h3>
        <a id="user-content--1-hw6" class="anchor" aria-hidden="true" href="#-1-hw6">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 1. <a href="https://drive.google.com/open?id=1luHTJOXQW-BWyueqsfzzAeiP8lUTZkje" rel="nofollow">HW6</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_01_hw6_fix_testspatch" class="anchor" aria-hidden="true" href="#apply-7_01_hw6_fix_testspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_01_HW6_fix_tests.patch
    </h4>
    <blockquote>
        <p>Инжекшен в <code>AbstractUserServiceTest.jpaUtil</code> сделал <a href="https://www.logicbig.com/tutorials/spring-framework/spring-core/lazy-at-injection-point.html" rel="nofollow"><code>@Lazy</code>: не иннициализировать бин до первого использования</a>.</p>
    </blockquote>
    <h4>
        <a id="user-content-apply-7_02_hw6_mealspatch" class="anchor" aria-hidden="true" href="#apply-7_02_hw6_mealspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_02_HW6_meals.patch
    </h4>
    <blockquote>
        <p>сделал фильтацию еды через <code>get</code>: операция идемпотентная, можно делать в браузере обновление по F5</p>
    </blockquote>
    <h4>
        <a id="user-content-внимание-чиним-пути-в-следующем-патче" class="anchor" aria-hidden="true" href="#внимание-чиним-пути-в-следующем-патче">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Внимание: чиним пути в следующем патче
    </h4>
    <p>При переходе на AJAX <code>JspMealController</code> удалим за ненадобностью, возвращение всей еды <code>meals()</code> останется в <code>RootController</code>.</p>
    <h4>
        <a id="user-content-apply-7_03_hw6_fix_relative_url_utf8patch" class="anchor" aria-hidden="true" href="#apply-7_03_hw6_fix_relative_url_utf8patch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_03_HW6_fix_relative_url_utf8.patch
    </h4>
    <ul>
        <li><a href="http://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name" rel="nofollow">Relative paths in JSP</a></li>
        <li><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-redirecting-redirect-prefix" rel="nofollow">Spring redirect: prefix</a></li>
    </ul>
    <h3>
        <a id="user-content--2-hw6-optional" class="anchor" aria-hidden="true" href="#-2-hw6-optional">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 2. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFaXViWkkwYkF0eW8" rel="nofollow">HW6 Optional</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_04_hw6_optional_add_rolepatch" class="anchor" aria-hidden="true" href="#apply-7_04_hw6_optional_add_rolepatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_04_HW6_optional_add_role.patch
    </h4>
    <blockquote>
        <ul>
            <li>Для доставания ролей у нас дублируется <code>fetch = EAGER</code> и <code>LEFT JOIN FETCH u.roles</code> (можно делать что-то одно). Запросы выполняются по-разному: проверьте.</li>
        </ul>
    </blockquote>
    <p><code>JdbcUserServiceTest</code> отвалились. Будем чинить в <code>7_06_HW6_optional_jdbc.patch</code></p>
    <h4>
        <a id="user-content-apply-7_05_fix_hint_graphpatch" class="anchor" aria-hidden="true" href="#apply-7_05_fix_hint_graphpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_05_fix_hint_graph.patch
    </h4>
    <ul>
        <li>
            <p>В <code>JpaUserRepositoryImpl.getByEmail</code> DISTINCT попадает в запрос, хотя он там не нужен. Это просто указание Hibernate не дублировать данные. Для оптимизации можно указать Hibernate делать запрос без
                distinct: <a href="https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#hql-distinct" rel="nofollow">15.16.2. Using DISTINCT with entity queries</a>
            </p>
            <ul>
                <li>Бага <a href="https://hibernate.atlassian.net/browse/HHH-13280" rel="nofollow">HINT_PASS_DISTINCT_THROUGH does not work if 'hibernate.use_sql_comments=true'</a>. При <code>hibernate.use_sql_comments=false</code> все работает- в
                    SELECT нет DISTINCT.
                </li>
            </ul>
        </li>
        <li>
            <p>Тест <code>DataJpaUserServiceTest.getWithMeals()</code> не работает для admin (у админа 2 роли, и еда при JOIN дублируется). <code>DISTINCT</code> при нескольких JOIN не помогает, оставил в графе только <code>meals</code>.</p>
        </li>
    </ul>
    <h4>
        <a id="user-content-apply-7_06_hw6_optional_jdbcpatch" class="anchor" aria-hidden="true" href="#apply-7_06_hw6_optional_jdbcpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_06_HW6_optional_jdbc.patch
    </h4>
    <blockquote>
        <ul>
            <li>в <code>JdbcUserRepositoryImpl.getAll()</code> собираю роли из <code>ResultSet</code> напрямую в <code>map</code></li>
            <li>в <code>insertRoles</code> поменял метод <code>batchUpdate</code> и сделал проверку на empty</li>
            <li>в <code>setRoles</code> достаю роли через <code>queryForList</code></li>
        </ul>
    </blockquote>
    <p>Еще интересные JDBC реализации:</p>
    <ul>
        <li>в <code>getAll()/ get()/ getByEmail()</code> делать запросы с <code>LEFT JOIN</code> и сделать реализацию <code>ResultSetExtractor</code></li>
        <li>подключить зависимость <code>spring-data-jdbc-core</code>. Там есть готовый <code>OneToManyResultSetExtractor</code>. Можно посмотреть, как он реализован.</li>
        <li>реализация, зависимая от БД (для postgres): доставать агрегированные роли и делать им <code>split(",")</code>:</li>
    </ul>
    <pre><code>SELECT u.*, string_agg(r.role, ',') AS roles
FROM users u
  JOIN user_roles r ON u.id=r.user_id
GROUP BY u.id
</code></pre>
    <h3>
        <a id="user-content-валидация-для-jdbcuserrepository-через-bean-validation-api" class="anchor" aria-hidden="true" href="#валидация-для-jdbcuserrepository-через-bean-validation-api">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Валидация для <code>JdbcUserRepository</code> через Bean Validation API
    </h3>
    <h4>
        <a id="user-content-apply-7_07_hw6_optional_jdbc_validationpatch" class="anchor" aria-hidden="true" href="#apply-7_07_hw6_optional_jdbc_validationpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_07_HW6_optional_jdbc_validation.patch
    </h4>
    <ul>
        <li><a href="https://alexkosarev.name/2018/07/30/bean-validation-api/" rel="nofollow">Валидация данных при помощи Bean Validation API</a>. Т.к. <code>Validator</code> thread-safe (из Javadoc), его лучше создать один раз и переиспользовать</li>
        <li>Проверку <code>@NotNull Meal.user</code> пока закомментировал. Починим в 10-м занятии через <code>@JsonView</code>.</li>
    </ul>
    <h3>
        <a id="user-content-отключение-кэша-в-тестах" class="anchor" aria-hidden="true" href="#отключение-кэша-в-тестах">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Отключение кэша в тестах:
    </h3>
    <h4>
        <a id="user-content-apply-7_08_hw06_optional2_disable_tests_cachepatch" class="anchor" aria-hidden="true" href="#apply-7_08_hw06_optional2_disable_tests_cachepatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_08_HW06_optional2_disable_tests_cache.patch
    </h4>
    <blockquote>
        <ul>
            <li>Удалил очистку кэша и <code>JpaUtil</code></li>
            <li>Переопределил в тестах <code>spring-cache.xml</code>: для отключения кэша Hibernate 2-го уровня <code>noOpCacheManager</code> недостаточно, требуется выставить <code>hibernate.cache.use_second_level_cache=false</code>. Кроме стандартного использования файла пропертей можно задать их прямо в конфигурации (через автодополнение в xml можно смотреть все варианты)
                &gt;
            </li>
        </ul>
    </blockquote>
    <ul>
        <li><a href="https://www.concretepage.com/spring/example_propertyoverrideconfigurer_spring" rel="nofollow">Example of PropertyOverrideConfigurer</a></li>
    </ul>
    <blockquote>
        <ul>
            <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#xsd-schemas-util" rel="nofollow">Spring util schema</a></li>
        </ul>
    </blockquote>
    <h2>
        <a id="user-content-занятие-7" class="anchor" aria-hidden="true" href="#занятие-7">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Занятие 7:
    </h2>
    <h3>
        <a id="user-content--3-тестирование-spring-mvc" class="anchor" aria-hidden="true" href="#-3-тестирование-spring-mvc">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 3. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFQXhBN1pqa3FyOUE" rel="nofollow">Тестирование Spring MVC</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_09_controller_testpatch" class="anchor" aria-hidden="true" href="#apply-7_09_controller_testpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_09_controller_test.patch
    </h4>
    <blockquote>
        <ul>
            <li>в <code>MockMvc</code> добавился <code>CharacterEncodingFilter</code></li>
            <li>добавил <code>AllActiveProfileResolver</code></li>
            <li>сделал вспомогательный метод <code>AbstractControllerTest.perform()</code></li>
        </ul>
    </blockquote>
    <ul>
        <li><a href="https://github.com/hamcrest/hamcrest-junit">Hamcrest</a></li>
        <li><a href="http://www.petrikainulainen.net/programming/spring-framework/unit-testing-of-spring-mvc-controllers-normal-controllers/" rel="nofollow">Unit Testing of Spring MVC Controllers</a></li>
    </ul>
    <h3>
        <a id="user-content---4-миграция-на-junit-5" class="anchor" aria-hidden="true" href="#--4-миграция-на-junit-5">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a>  4. <a href="https://drive.google.com/open?id=16wi0AJLelso-dPuDj6xaGL7yJPmiO71e" rel="nofollow">Миграция на JUnit 5</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_10_junit5patch" class="anchor" aria-hidden="true" href="#apply-7_10_junit5patch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_10_JUnit5.patch
    </h4>
    <blockquote>
        <ul>
            <li><a href="https://junit.org/junit5/docs/current/user-guide/#running-tests-build-maven" rel="nofollow">No need <code>junit-platform-surefire-provider</code> dependency in <code>maven-surefire-plugin</code></a></li>
            <li><a href="https://youtrack.jetbrains.com/issue/IDEA-166549" rel="nofollow">Наконец пофиксили баг с <code>@SpringJUnitConfig</code></a></li>
        </ul>
    </blockquote>
    <ul>
        <li><a href="https://junit.org/junit5" rel="nofollow">JUnit 5 homepage</a></li>
        <li><a href="https://junit.org/junit5/docs/snapshot/user-guide/#overview" rel="nofollow">Overview</a></li>
        <li><a href="https://habr.com/post/337700" rel="nofollow">10 интересных нововведений</a></li>
        <li>
            Дополнительно:
            <ul>
                <li><a href="https://junit.org/junit5/docs/current/user-guide/#extensions" rel="nofollow">Extension Model</a></li>
                <li><a href="http://www.baeldung.com/junit-5" rel="nofollow">A Guide to JUnit 5</a></li>
                <li><a href="http://www.baeldung.com/junit-5-migration" rel="nofollow">Migrating from JUnit 4</a></li>
                <li><a href="https://junit.org/junit5/docs/snapshot/user-guide/#extensions-lifecycle-callbacks-before-after-execution" rel="nofollow">Before and After Test Execution Callbacks</a></li>
                <li><a href="https://junit.org/junit5/docs/snapshot/user-guide/#writing-tests-conditional-execution" rel="nofollow">Conditional Test Execution</a></li>
                <li><a href="https://github.com/junit-team/junit5/wiki/Third-party-Extensions">Third party Extensions</a></li>
                <li><a href="https://stackoverflow.com/questions/43280250" rel="nofollow">Реализация assertThat</a></li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content--5-принципы-rest-rest-контроллеры" class="anchor" aria-hidden="true" href="#-5-принципы-rest-rest-контроллеры">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 5. <a href="https://drive.google.com/open?id=1e4ySjV15ZbswqzL29UkRSdGb4lcxXFm1" rel="nofollow">Принципы REST. REST контроллеры</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_11_rest_controllerpatch" class="anchor" aria-hidden="true" href="#apply-7_11_rest_controllerpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_11_rest_controller.patch
    </h4>
    <ul>
        <li><a href="http://spring-projects.ru/understanding/rest/" rel="nofollow">Понимание REST</a></li>
        <li><a href="https://ru.wikipedia.org/wiki/JSON" rel="nofollow">JSON (JavaScript Object Notation)</a></li>
        <li><a href="https://habrahabr.ru/company/yandex/blog/265569/" rel="nofollow">15 тривиальных фактов о правильной работе с протоколом HTTP</a></li>
        <li><a href="https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291" rel="nofollow">10 Best Practices for Better RESTful</a></li>
        <li><a href="https://stackoverflow.com/questions/20951419/what-are-best-practices-for-rest-nested-resources" rel="nofollow">Best practices for rest nested resources</a></li>
        <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-requestmapping" rel="nofollow">Request mapping</a></li>
        <li>
            Дополнительно:
            <ul>
                <li><a href="https://gist.github.com/Londeren/838c8a223b92aa4017d3734d663a0ba3">Подборка практик REST</a></li>
                <li><a href="http://www.infoq.com/articles/springmvc_jsx-rs" rel="nofollow">JAX-RS vs Spring MVC</a></li>
                <li><a href="http://habrahabr.ru/post/144011/" rel="nofollow">RESTful API для сервера – делаем правильно (Часть 1)</a></li>
                <li><a href="http://habrahabr.ru/post/144259/" rel="nofollow">RESTful API для сервера – делаем правильно (Часть 2)</a></li>
                <li><a href="https://www.youtube.com/watch?v=Q84xT4Zd7vs&amp;list=PLoij6udfBncivGZAwS2yQaFGWz4O7oH48" rel="nofollow">И. Головач. RestAPI</a></li>
                <li><a href="https://habr.com/ru/post/440214/" rel="nofollow">value/name в аннотациях @PathVariable и @RequestParam</a></li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content--6-тестирование-rest-контроллеров-jackson" class="anchor" aria-hidden="true" href="#-6-тестирование-rest-контроллеров-jackson">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 6. <a href="https://drive.google.com/open?id=1aZm2qoMh4yL_-i3HhRoyZFjRAQx-15lO" rel="nofollow">Тестирование REST контроллеров. Jackson.</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_12_rest_test_jacksonpatch" class="anchor" aria-hidden="true" href="#apply-7_12_rest_test_jacksonpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_12_rest_test_jackson.patch
    </h4>
    <ul>
        <li><a href="https://github.com/FasterXML/jackson-databind">Jackson databind github</a></li>
        <li><a href="https://www.baeldung.com/jackson-annotations" rel="nofollow">Jackson Annotation Examples</a></li>
    </ul>
    <h3>
        <a id="user-content--7-кастомизация-jackson-object-mapper" class="anchor" aria-hidden="true" href="#-7-кастомизация-jackson-object-mapper">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 7. <a href="https://drive.google.com/open?id=1CM6y1JhKG_yeLQE_iCDONnI7Agi4pBks" rel="nofollow">Кастомизация Jackson Object Mapper</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_13_jackson_object_mapperpatch" class="anchor" aria-hidden="true" href="#apply-7_13_jackson_object_mapperpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_13_jackson_object_mapper.patch
    </h4>
    <ul>
        <li>Сериализация hibernate lazy-loading с помощью <a href="https://github.com/FasterXML/jackson-datatype-hibernate">jackson-datatype-hibernate</a></li>
        <li><a href="https://geowarin.github.io/jsr310-dates-with-jackson.html" rel="nofollow">Handle Java 8 dates with Jackson</a></li>
        <li>
            Дополнительно:
            <ul>
                <li><a href="https://www.sghill.net/how-do-i-write-a-jackson-json-serializer-deserializer.html" rel="nofollow">Jackson JSON Serializer &amp; Deserializer</a></li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content--8-тестирование-rest-контроллеров-через-jsonassert-и-матчеры" class="anchor" aria-hidden="true" href="#-8-тестирование-rest-контроллеров-через-jsonassert-и-матчеры">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 8. <a href="https://drive.google.com/open?id=1oa3e0_tG57E71g6PW7_tfb3B61Qldctl" rel="nofollow">Тестирование REST контроллеров через JSONassert и Матчеры</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_14_json_assert_testspatch" class="anchor" aria-hidden="true" href="#apply-7_14_json_assert_testspatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_14_json_assert_tests.patch
    </h4>
    <ul>
        <li><a href="https://github.com/skyscreamer/JSONassert">JSONassert</a></li>
        <li><a href="https://www.programcreek.com/java-api-examples/index.php?api=com.fasterxml.jackson.databind.ObjectMapper" rel="nofollow">Java Code Examples for ObjectMapper</a></li>
    </ul>
    <h4>
        <a id="user-content-apply-7_15_tests_refactoringpatch" class="anchor" aria-hidden="true" href="#apply-7_15_tests_refactoringpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_15_tests_refactoring.patch
    </h4>
    <ul>
        <li><a href="https://www.baeldung.com/java-safevarargs" rel="nofollow">Java @SafeVarargs Annotation</a></li>
    </ul>
    <h3>
        <a id="user-content--9-тестирование-через-soapui-utf-8" class="anchor" aria-hidden="true" href="#-9-тестирование-через-soapui-utf-8">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672715/06dbc6ce-e6e7-11e5-81a9-04fbddb9e488.png" alt="video" style="max-width:100%;"></a> 9. <a href="https://drive.google.com/open?id=0B9Ye2auQ_NsFVXNmOUdBbUxxWVU" rel="nofollow">Тестирование через SoapUi. UTF-8</a>
    </h3>
    <h4>
        <a id="user-content-apply-7_16_soapui_utf8_converterpatch" class="anchor" aria-hidden="true" href="#apply-7_16_soapui_utf8_converterpatch">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Apply 7_16_soapui_utf8_converter.patch
    </h4>
    <ul>
        <li>
            Инструменты тестирования REST:
            <ul>
                <li><a href="https://www.soapui.org/downloads/soapui/" rel="nofollow">SoapUi</a></li>
                <li>
                    <a href="http://rus-linux.net/lib.php?name=/MyLDP/internet/curlrus.html" rel="nofollow">Написание HTTP-запросов с помощью Curl</a>.<br>
                    Для Windows 7 можно использовать Git Bash, с Windows 10 v1803 можно прямо из консоли. Возможны проблемы с UTF-8:
                    <ul>
                        <li><a href="https://stackoverflow.com/a/41384903/548473" rel="nofollow">CURL doesn't encode UTF-8</a></li>
                        <li><a href="https://support.socialkit.ru/ru/knowledge-bases/4/articles/11110-preduprezhdenie-obnaruzhenyi-problemyi-svyazannyie-s-raspoznavaniem-russkih-simvolov" rel="nofollow">Нстройка кодировки в Windows</a></li>
                    </ul>
                </li>
                <li><strong><a href="https://www.jetbrains.com/help/idea/rest-client-tool-window.html" rel="nofollow">IDEA: Tools-&gt;HTTP Client-&gt;...</a></strong></li>
                <li><a href="https://www.getpostman.com/" rel="nofollow">Postman</a></li>
                <li><a href="https://insomnia.rest/" rel="nofollow">Insomnia REST client</a></li>
            </ul>
        </li>
    </ul>
    <p><strong>Импортировать проект в SoapUi из <code>config\Topjava-soapui-project.xml</code>. Response смотреть в формате JSON.</strong></p>
    <blockquote>
        <p>Проверка UTF-8: <a href="http://localhost:8080/topjava/rest/profile/text" rel="nofollow"></a><a href="http://localhost:8080/topjava/rest/profile/text" rel="nofollow">http://localhost:8080/topjava/rest/profile/text</a></p>
    </blockquote>
    <p><a href="http://web.archive.org/web/20190102203042/http://forum.spring.io/forum/spring-projects/web/74209-responsebody-and-utf-8" rel="nofollow">ResponseBody and UTF-8</a></p>
    <h2>
        <a id="user-content--ваши-вопросы" class="anchor" aria-hidden="true" href="#-ваши-вопросы">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672858/9cd58692-e6e7-11e5-905d-c295d2a456f1.png" alt="question" style="max-width:100%;"></a> Ваши вопросы
    </h2>
    <blockquote>
        <p>Зачем у нас и UIController'ы, и RestController'ы? То есть в общем случае backend-разработчику недостаточно предоставить REST-api и RestController?</p>
    </blockquote>
    <p>В общем случае нужны и те и другие. REST обычно используют для отдельного UI например на React или Angular или для интеграции / мобильного приложения. У нас REST контроллеры используются только для
        тестирования. UI мы используем для нашего приложения на JSP шаблонах. Таких сайтов без богатой UI логики тоже немало. Например <a href="https://javaops.ru/" rel="nofollow">https://javaops.ru/</a> :)<br>
        Разница в запросах:
    </p>
    <ul>
        <li>для UI используются только GET и POST</li>
        <li>при создании-обновлении в UI мы принимаем данные из формы <code>application/x-www-form-urlencoded</code> (посмотрите вкладку <code>Network</code>, не в формате JSON)</li>
        <li>для REST запросы GET, POST, PUT, DELETE, PATCH и возвращают только данные (обычно JSON)</li>
    </ul>
    <p>и в способе авторизации:</p>
    <ul>
        <li>для RESТ у нас будет базовая авторизация</li>
        <li>UI через cookies</li>
    </ul>
    <p>Также часто бывают смешанные сайты - где есть и отдельное JS приложение и шаблоны.</p>
    <blockquote>
        <p>При выполнении тестов через MockMvc никаких изменений на базе не видно, почему оно не сохраняет?</p>
    </blockquote>
    <p><code>AbstractControllerTest</code> аннотируется <code>@Transactional</code> - это означает, что тесты идут в транзакции, и после каждого теста JUnit делает rollback базы.</p>
    <blockquote>
        <p>Что получается в результате выполнения запроса <code>SELECT DISTINCT(u) FROM User u LEFT JOIN FETCH u.roles ORDER BY u.name, u.email</code>? В чем разница в SQL без <code>DISTINCT</code>.</p>
    </blockquote>
    <p>Запросы SQL можно посмотреть в логах. Т.е. <code>DISTINCT</code> в <code>JPQL</code> влияет на то, как Hibernate обрабатывает дублирующиеся записи (с <code>DISTINCT</code> их исключает). Результат можно посмотреть в тестах или
        приложении, поставив брекпойнт. По поводу <code>SQL DISTINCT</code> не стесняйтесь пользоваться google, например, <a href="http://2sql.ru/novosti/sql-distinct/" rel="nofollow">оператор SQL DISTINCT</a>
    </p>
    <blockquote>
        <p>В чем заключается расширение функциональности hamcrest в нашем тесте, что нам пришлось его отдельно от JUnit прописывать?</p>
    </blockquote>
    <p>hamcrest-all используется в проверках <code>RootControllerTest</code>: <code>org.hamcrest.Matchers.*</code></p>
    <blockquote>
        <p>Jackson мы просто подключаем в помнике, и Spring будет с ним работать без любых других настроек?</p>
    </blockquote>
    <p>Да, Spring смотрит в classpath и если видит там Jackson, то подключает интеграцию с ним.</p>
    <blockquote>
        <p>Где-то слышал, что любой ресурс по REST должен однозначно идентифицироваться через url без параметров. Правильно ли задавать URL для фильтрации в виде <code>http://localhost/topjava/rest/meals/filter/{startDate}/{startTime}/{endDate}/{endTime}</code> ?</p>
    </blockquote>
    <p>Так делают, только при отношении <a href="https://ru.wikipedia.org/wiki/Диаграмма_классов#.D0.90.D0.B3.D1.80.D0.B5.D0.B3.D0.B0.D1.86.D0.B8.D1.8F" rel="nofollow">агрегация</a>, например, если давать админу право
        смотреть еду любого юзера, URL мог бы быть похож на <code>http://localhost/topjava/rest/users/{userId}/meals/{mealId}</code> (не рекомендуется, см ссылку ниже). В случае критериев поиска или страничных данных
        они передаются как параметр. Смотри также:
    </p>
    <ul>
        <li><a href="https://habrahabr.ru/company/yandex/blog/265569/" rel="nofollow">15 тривиальных фактов о правильной работе с протоколом HTTP</a></li>
        <li><a href="https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291" rel="nofollow">10 Best Practices for Better RESTful</a></li>
        <a href="https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291" rel="nofollow">
        </a>
        <li><a href="https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291" rel="nofollow"></a><a href="https://stackoverflow.com/questions/15259843/how-to-structure-rest-resource-hierarchy" rel="nofollow">REST resource hierarchy (если кратко: не рекомендуется)</a></li>
    </ul>
    <blockquote>
        <p>Что означает конструкция в <code>JsonUtil</code>: <code>reader.&lt;T&gt;readValues(json)</code>;</p>
    </blockquote>
    <p>См. <a href="https://docs.oracle.com/javase/tutorial/java/generics/methods.html" rel="nofollow">Generic Methods</a>. Когда компилятор не может вывести тип, можно его уточнить при вызове generic метода. Неважно,
        static или нет.
    </p>
    <h2>
        <a id="user-content--домашнее-задание-hw07" class="anchor" aria-hidden="true" href="#-домашнее-задание-hw07">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672719/09593080-e6e7-11e5-81d1-5cb629c438ca.png" alt="hw" style="max-width:100%;"></a> Домашнее задание HW07
    </h2>
    <ul>
        <li>
            1: Добавить тесты контроллеров:
            <ul>
                <li>1.1 <code>RootControllerTest.getMeals</code> для <code>meals.jsp</code></li>
                <li>1.2 Сделать <code>ResourceControllerTest</code> для <code>style.css</code> (проверить <code>status</code> и <code>ContentType</code>)</li>
            </ul>
        </li>
        <li>
            2: Реализовать <code>MealRestController</code> и протестировать его через <code>MealRestControllerTest</code>
            <ul>
                <li>2.1 следите, чтобы url в тестах совпадал с параметрами в методе контроллера. Можно добавить логирование <code>&lt;logger name="org.springframework.web" level="debug"/&gt;</code> для проверки маршрутизации.</li>
                <li>2.2 в параметрах <code>getBetween</code> принимать <code>LocalDateTime</code> (конвертировать через <a href="http://blog.codeleak.pl/2014/06/spring-4-datetimeformat-with-java-8.html" rel="nofollow">@DateTimeFormat with Java 8
                    Date-Time API</a>), пока без проверки на <code>null</code> (используя <code>toLocalDate()/toLocalTime()</code>, см. Optional п.3). В тестах передавать в формате <code>ISO_LOCAL_DATE_TIME</code> (
                    например <code>'2011-12-03T10:15:30'</code>).
                </li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content-optional" class="anchor" aria-hidden="true" href="#optional">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Optional
    </h3>
    <ul>
        <li>
            3: Переделать <code>MealRestController.getBetween</code> на параметры <code>LocalDate/LocalTime</code> c раздельной фильтрацией по времени/дате, работающий при <code>null</code> значениях (см. демо и <code>JspMealController.getBetween</code>)
            . Заменить <code>@DateTimeFormat</code> на свои LocalDate/LocalTime конверторы или форматтеры.
            <ul>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#core-convert" rel="nofollow">Spring Type Conversion</a></li>
                <li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#format" rel="nofollow">Spring Field Formatting</a></li>
                <li><a href="http://stackoverflow.com/questions/13048368/difference-between-spring-mvc-formatters-and-converters" rel="nofollow">Difference between Spring MVC formatters and converters</a></li>
            </ul>
        </li>
        <li>4: Протестировать <code>MealRestController</code> (SoapUi, curl, IDEA Test RESTful Web Service, Postman). Запросы <code>curl</code> занести в отдельный <code>md</code> файл (или <code>README.md</code>)</li>
        <li>
            5: Добавить в <code>AdminRestController</code> и <code>ProfileRestController</code> методы получения пользователя вместе с едой (<code>getWithMeals</code>, <code>/with-meals</code>).
            <ul>
                <li><a href="https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion" rel="nofollow">Jackson – Bidirectional Relationships</a></li>
            </ul>
        </li>
    </ul>
    <h3>
        <a id="user-content-optional-2" class="anchor" aria-hidden="true" href="#optional-2">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        Optional 2
    </h3>
    <ul>
        <li>6: Сделать тесты на методы контроллеров <code>getWithMeals()</code> (п.5)</li>
    </ul>
    <h2>
        <a id="user-content-на-следующем-занятии-используется-javascriptjquery-если-у-вас-там-пробелы-пройдите-его-основы" class="anchor" aria-hidden="true" href="#на-следующем-занятии-используется-javascriptjquery-если-у-вас-там-пробелы-пройдите-его-основы">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <strong>На следующем занятии используется JavaScript/jQuery. Если у вас там пробелы, <a href="https://github.com/JavaOPs/topjava#html-javascript-css">пройдите его основы</a></strong>
    </h2>
    <h2>
        <a id="user-content--типичные-ошибки-и-подсказки-по-реализации" class="anchor" aria-hidden="true" href="#-типичные-ошибки-и-подсказки-по-реализации">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
        </a>
        <a target="_blank" rel="noopener noreferrer" href="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png"><img src="https://cloud.githubusercontent.com/assets/13649199/13672935/ef09ec1e-e6e7-11e5-9f79-d1641c05cbe6.png" alt="error" style="max-width:100%;"></a> Типичные ошибки и подсказки по реализации
    </h2>
    <ul>
        <li>1: Ошибка в тесте <em>Invalid read array from JSON</em> обычно расшифровывается немного ниже: читайте внимательно.</li>
        <li>2: <a href="https://urvanov.ru/2016/12/03/jackson-и-неизменяемые-объекты/" rel="nofollow">Jackson и неизменяемые объекты</a> (для сериализации MealTo)</li>
        <li>3: Если у meal, приходящий в контроллер, поля <code>null</code>, проверьте <code>@RequestBody</code> перед параметром (данные приходят в формате JSON)</li>
        <li>4: При проблемах с собственным форматтером убедитесь, что в конфигурации <code>&lt;mvc:annotation-driven...</code> не дублируется</li>
        <li>5: <strong>Проверьте выполение ВСЕХ тестов через maven</strong>. В случае проблем проверьте, что не портите константу из <code>MealTestData</code></li>
        <li>6: <code>@Autowired</code> в тестах нужно делать в том месте, где класс будет использоваться. Общий принцип: не размазывать код по классам, объявление переменных держать как можно ближе к ее использованию,
            группировать (не смешивать) код с разной функциональностью.
        </li>
        <li>7: Попробуйте в <code>RootControllerTest.getMeals</code> сделать сравнение через <code>model().attribute("meals", expectedValue)</code>. Учтите, что вывод результатов через <code>toString</code> к сравнению отношения не имеет</li>
    </ul>
</article>